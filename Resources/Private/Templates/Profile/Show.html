<html lang="en"
      xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
      xmlns:be="http://typo3.org/ns/TYPO3/CMS/Backend/ViewHelpers"
      data-namespace-typo3-fluid="true">

<f:layout name="Module"/>

<f:section name="Content">
    <h1>Queries grouped by type</h1>

    <p>
        <f:link.action action="list"
                       controller="Profile"
                       class="btn btn-primary">
            Back
        </f:link.action>
        <f:link.action action="download"
                       controller="Profile"
                       class="btn btn-primary"
                       arguments="{uniqueIdentifier: uniqueIdentifier, downloadType: 'csv'}">
            Download CSV
        </f:link.action>
        <f:link.action action="download"
                       controller="Profile"
                       class="btn btn-primary"
                       arguments="{uniqueIdentifier: uniqueIdentifier, downloadType: 'json'}">
            Download JSON
        </f:link.action>
    </p>

    <f:be.infobox title="Request" disableIcon="true">
        <pre><code>{profileTypes.0.request}</code></pre>
    </f:be.infobox>

    <table class="table">
        <thead>
        <tr>
            <th>Query type</th>
            <th>Amount of queries</th>
            <th>Summed Duration</th>
            <th>Action</th>
        </tr>
        </thead>
        <tbody>
        <f:for each="{profileTypes}" as="profile">
            <tr>
                <td>{profile.query_type}</td>
                <td>{profile.amount}</td>
                <td>
                    {profile.duration}
                </td>
                <td>
                    <f:link.action action="queryType"
                                   controller="Profile"
                                   class="btn btn-default"
                                   arguments="{uniqueIdentifier: profile.unique_call_identifier, queryType: profile.query_type}">
                        <core:icon identifier="actions-search"/>
                    </f:link.action>
                </td>
            </tr>
        </f:for>
        </tbody>
    </table>
</f:section>
</html>
